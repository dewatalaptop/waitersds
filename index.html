<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Sistem alokasi reservasi Dolan Sawah</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 0 20px;
    }
    header {
      background: #4CAF50;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }
    section {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    label, select, input[type="number"], button {
      display: block;
      margin: 10px 0;
    }
    input, select {
      width: 100%;
      padding: 8px;
    }
    button {
      padding: 10px;
      background: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background: #45a049;
    }
    .output {
      white-space: pre-wrap;
      background: #f1f1f1;
      padding: 15px;
      border-radius: 6px;
      margin-top: 15px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <header>Sistem alokasi reservasi Dolan Sawah</header>

  <section>
    <h2>Formulir Reservasi</h2>
    <label>Nama:</label>
    <input type="text" id="nama">

    <label>Jam Reservasi:</label>
    <input type="time" id="jam">

    <label>Jumlah Peserta:</label>
    <input type="number" id="peserta">

    <label>Jumlah Lauk:</label>
    <input type="number" id="lauk">

    <label>Pilih Menu:</label>
    <label><input type="checkbox" id="ayam"> Ayam Bakar</label>
    <label><input type="checkbox" id="lele"> Lele</label>
    <label><input type="checkbox" id="nila"> Nila</label>

    <button onclick="prosesReservasi()">Proses Reservasi</button>
  </section>

  <section>
    <h2>Output Alokasi</h2>
    <div class="output" id="output"></div>
    <button onclick="bagikanWhatsApp()">Bagikan via WhatsApp</button>
  </section>

  <script>
    function prosesReservasi() {
      const nama = document.getElementById('nama').value;
      const jam = document.getElementById('jam').value;
      const peserta = parseInt(document.getElementById('peserta').value);
      const lauk = parseInt(document.getElementById('lauk').value);
      const menu = {
        ayam: document.getElementById('ayam').checked,
        lele: document.getElementById('lele').checked,
        nila: document.getElementById('nila').checked
      };

      const alokasi = [];
      const alat = [
        { nama: 'Roll Top Besar', kapasitas: 30 },
        { nama: 'Roll Top Sedang', kapasitas: 20 },
        { nama: 'Roll Top Kecil', kapasitas: 10 }
      ];

      let sisa = peserta;
      for (const a of alat) {
        let jumlah = Math.floor(sisa / a.kapasitas);
        if (jumlah > 0) {
          alokasi.push(`${jumlah}x ${a.nama}`);
          sisa -= jumlah * a.kapasitas;
        }
      }

      if (sisa > 0) {
        alokasi.push('Refill atau sewa tambahan');
      }

      let outputText = `Nama: ${nama}\n`;
      outputText += `Jam: ${jam}\n`;
      outputText += `Jumlah Peserta: ${peserta}\n`;
      outputText += `Jumlah Lauk: ${lauk}\n`;
      outputText += `Menu: ${Object.keys(menu).filter(k => menu[k]).join(', ') || '-' }\n`;
      outputText += `Alokasi Alat:\n- ${alokasi.join('\n- ')}`;

      document.getElementById('output').innerText = outputText;
    }

    function bagikanWhatsApp() {
      const pesan = document.getElementById('output').innerText;
      const encoded = encodeURIComponent(pesan);
      const nomor = "6285601393640";
      const url = `https://wa.me/${nomor}?text=${encoded}`;
      window.open(url, '_blank');
    }
  </script>
</body>
</html>