<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reservasi Dolan Sawah</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #4CAF50;
      color: white;
      padding: 10px;
      text-align: center;
    }

    .tab {
      overflow: hidden;
      background-color: #f1f1f1;
    }

    .tab button {
      background-color: inherit;
      border: none;
      outline: none;
      padding: 14px 16px;
      cursor: pointer;
    }

    .tab button:hover {
      background-color: #ddd;
    }

    .tab button.active {
      background-color: #ccc;
    }

    .tabcontent {
      display: none;
      padding: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    table, th, td {
      border: 1px solid #ddd;
    }

    th, td {
      padding: 8px;
      text-align: left;
    }

    @media screen and (max-width: 600px) {
      table, thead, tbody, th, td, tr {
        display: block;
      }

      th {
        position: absolute;
        top: -9999px;
        left: -9999px;
      }

      td {
        position: relative;
        padding-left: 50%;
      }

      td::before {
        position: absolute;
        top: 0;
        left: 0;
        width: 45%;
        padding-left: 15px;
        white-space: nowrap;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>Sistem Reservasi Dolan Sawah</h1>
    <p>by Ryan</p>
  </header>

  <nav class="tab">
    <button class="tablinks" onclick="openTab(event, 'Reservasi')" id="defaultOpen">Reservasi</button>
    <button class="tablinks" onclick="openTab(event, 'Rangkuman')">Rangkuman</button>
    <button class="tablinks" onclick="openTab(event, 'Stok')">Stok Perlengkapan</button>
    <button class="tablinks" onclick="openTab(event, 'Tempat')">Info Tempat</button>
  </nav>

  <div id="Reservasi" class="tabcontent">
    <form id="reservationForm">
      <label>Nama Reservasi:</label>
      <input type="text" name="nama" required><br>

      <label>Jumlah Peserta:</label>
      <input type="number" name="jumlah" required><br>

      <label>Jam Reservasi:</label>
      <input type="time" name="jam" required><br>

      <label>Pilihan Tempat:</label>
      <select name="tempat" required>
        <option value="Lantai 1">Lantai 1</option>
        <option value="Lantai 2">Lantai 2</option>
        <option value="Lantai 3">Lantai 3</option>
        <option value="Gubug 1">Gubug 1</option>
        <option value="Gubug 2">Gubug 2</option>
        <option value="Gubug 3">Gubug 3</option>
      </select><br>

      <label>Pilihan Menu:</label>
      <select name="menu" required>
        <option value="Paket A">Paket A</option>
        <option value="Paket B">Paket B</option>
        <option value="Paket C">Paket C</option>
        <option value="Paket D">Paket D</option>
        <option value="Paket E">Paket E</option>
        <option value="Paket F">Paket F</option>
        <option value="Paket G">Paket G</option>
        <option value="Paket H">Paket H</option>
        <option value="Paket I">Paket I</option>
        <option value="Paket J">Paket J</option>
      </select><br>

      <label>Request Tambahan:</label>
      <input type="text" name="request"><br>

      <button type="submit">Tambah Reservasi</button>
    </form>
  </div>

  <div id="Rangkuman" class="tabcontent">
    <div id="summaryContent"></div>
    <label>Nomor WhatsApp:</label>
    <input type="text" id="waNumber" placeholder="Contoh: 6281234567890">
    <button onclick="shareWhatsApp()">Share via WhatsApp</button>
  </div>

  <div id="Stok" class="tabcontent">
    <table>
      <thead>
        <tr>
          <th>Nama Perlengkapan</th>
          <th>Jenis</th>
          <th>Kapasitas</th>
          <th>Jumlah Tersedia</th>
        </tr>
      </thead>
      <tbody id="stokTable"></tbody>
    </table>
  </div>

  <div id="Tempat" class="tabcontent">
    <table>
      <thead>
        <tr>
          <th>Nama Tempat</th>
          <th>Kapasitas Total</th>
          <th>Kapasitas Tersisa</th>
        </tr>
      </thead>
      <tbody id="tempatTable"></tbody>
    </table>
  </div>

  <script>
    const tempatData = {
      "Lantai 1": 240,
      "Lantai 2": 64,
      "Lantai 3": 112,
      "Gubug 1": 40,
      "Gubug 2": 15,
      "Gubug 3": 110
    };

    const stokData = [
      { nama: "Roll top panjang", jenis: "Penyajian", kapasitas: "40-80", jumlah: 2 },
      { nama: "Roll top sedang", jenis: "Penyajian", kapasitas: "25-39", jumlah: 2 },
      { nama: "Roll top bulat", jenis: "Penyajian", kapasitas: "25-35", jumlah: 2 },
      { nama: "Roll top kotak kecil", jenis: "Penyajian", kapasitas: "20-24", jumlah: 5 },
      { nama: "Magicom besar", jenis: "Penyajian", kapasitas: "80", jumlah: 3 },
      { nama: "Magicom kecil", jenis: "Penyajian", kapasitas: "20", jumlah: 1 },
      { nama: "Pemanas sup 39", jenis: "Penyajian", kapasitas: "39", jumlah: 2 },
      { nama: "Pemanas sup 80", jenis: "Penyajian", kapasitas: "80", jumlah: 1 },
      { nama: "Termos es kecil", jenis: "Penyajian", kapasitas: "20", jumlah: 2 },
      { nama: "Termos es sedang", jenis: "Penyajian", kapasitas: "35", jumlah: 1 },
      { nama: "Termos es besar", jenis: "Penyajian", kapasitas: "80", jumlah: 5 },
      { nama: "Dispenser teh kecil", jenis: "Penyajian", kapasitas: "32", jumlah: 5 },
      { nama: "Dispenser teh sedang", jenis: "Penyajian", kapasitas: "45", jumlah: 1 },
      { nama: "Dispenser teh double", jenis: "Penyajian", kapasitas: "100", jumlah: 1 },
      { nama: "Dispenser teh besar", jenis: "Penyajian", kapasitas: "166", jumlah: 1 },
      { nama: "Toples kerupuk besar", jenis: "Penyajian", kapasitas: "-", jumlah: 1 }
    ];

    let reservasiList = [];

    document.getElementById("reservationForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const form = e.target;
      const reservasi = {
        nama: form.nama.value,
        jumlah: parseInt(form.jumlah.value),
        jam: form.jam.value,
        tempat: form.tempat.value,
        menu: form.menu.value,
        request: form.request.value
      };
      reservasiList.push(reservasi);
      alert("Reservasi ditambahkan!");
      form.reset();
    });

    function openTab(evt, tabName) {
      const tabcontent = document.getElementsByClassName("tabcontent");
      for (let i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }

      const tablinks = document.getElementsByClassName("tablinks");
      for (let i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }

      document.getElementById(tabName).style.display = "block";
      evt.currentTarget.className += " active";

      if (tabName === "Rangkuman") tampilkanRangkuman();
      else if (tabName === "Stok") tampilkanStok();
      else if (tabName === "Tempat") tampilkanTempat();
    }

    function tampilkanRangkuman() {
      const container = document.getElementById("summaryContent");
      container.innerHTML = "";
      reservasiList.forEach((r, i) => {
        container.innerHTML += `<p><b>${i + 1}. ${r.nama}</b> (${r.jumlah} org) - ${r.tempat}, ${r.menu}<br>Jam: ${r.jam} | Catatan: ${r.request || "-"}</p>`;
      });
    }

    function tampilkanStok() {
      const table = document.getElementById("stokTable");
      table.innerHTML = "";
      stokData.forEach(s => {
        table.innerHTML += `<tr>
          <td>${s.nama}</td>
          <td>${s.jenis}</td>
          <td>${s.kapasitas}</td>
          <td>${s.jumlah}</td>
        </tr>`;
      });
    }

    function tampilkanTempat() {
      const table = document.getElementById("tempatTable");
      table.innerHTML = "";
      Object.entries(tempatData).forEach(([nama, kapasitas]) => {
        const terpakai = reservasiList.filter(r => r.tempat === nama).reduce((a, b) => a + b.jumlah, 0);
        const tersisa = kapasitas - terpakai;
        table.innerHTML += `<tr>
          <td>${nama}</td>
          <td>${kapasitas}</td>
          <td>${tersisa}</td>
        </tr>`;
      });
    }

    function shareWhatsApp() {
      const nomor = document.getElementById("waNumber").value;
      if (!nomor) return alert("Masukkan nomor WhatsApp.");
      const pesan = reservasiList.map((r, i) => `${i + 1}. ${r.nama} (${r.jumlah} org), ${r.tempat}, ${r.menu}, ${r.jam}, Catatan: ${r.request || "-"}`).join("\n");
      const url = `https://wa.me/${nomor}?text=${encodeURIComponent(pesan)}`;
      window.open(url, "_blank");
    }

    document.getElementById("defaultOpen").click();
  </script>

</body>
</html>